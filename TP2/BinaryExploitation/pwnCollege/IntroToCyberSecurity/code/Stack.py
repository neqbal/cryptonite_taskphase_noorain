import gdb

# Function to read memory from rsp and print address and value if it's 0x41
def print_stack(rsp, rbp):
    num_bytes = rbp - rsp
    print(f"Reading memory from {hex(rsp)} to {hex(rsp + num_bytes)}:")

    # Iterate over the range of bytes
    num_bytes = 400 
    for i in range(num_bytes+1):
        # Calculate the current memory address
        current_address = rsp + i
        
        # Read each byte from the address
        byte_value = gdb.parse_and_eval('*((unsigned char*){})'.format(hex(current_address)))

        # Print the address and value only if the value is 0x41
        #if byte_value == 0x19:
        print(f"Address: {hex(current_address)} | Value: {hex(byte_value)}")


# Get the current stack pointer (rsp)
rsp = gdb.parse_and_eval("$rsp")
rbp = gdb.parse_and_eval("$rbp")
print_stack(rsp, rbp)
